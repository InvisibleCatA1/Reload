package com.invisiblecat.reload.module.modules.exploit;

import com.invisiblecat.reload.module.Category;
import com.invisiblecat.reload.module.Module;
import com.invisiblecat.reload.setting.settings.ModeSetting;
import com.invisiblecat.reload.utils.chat.ChatUtils;
import net.minecraft.network.play.client.C02PacketUseEntity;
import net.minecraft.network.play.client.C03PacketPlayer;

import java.util.Random;


public class Kick extends Module {

    private final ModeSetting mode = new ModeSetting("Mode", "Self Hurt", "Quit", "Self Hurt", "Illegal Chat");

    public Kick() {
        super("Kick", 0, Category.EXPLOIT, AutoDisable.WORLD);
    }


    @Override
    public void onEnable() {
        Random rand = new Random();

        if(mc.isIntegratedServerRunning()) {
            ChatUtils.sendChatMessageClient("Cannot enable Kick in singleplayer", ChatUtils.Type.ERROR);
            this.setEnabled(false);
            return;
        }

        switch (mode.getSelected().toLowerCase().replaceAll("\\s", "")) {
            case "invalidpacket":
                mc.thePlayer.sendQueue.addToSendQueue(new C03PacketPlayer.C04PacketPlayerPosition(Double.NEGATIVE_INFINITY, Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY, !mc.thePlayer.onGround));
                break;
            case "quit":
                mc.theWorld.sendQuittingDisconnectingPacket();
                break;
            case "selfhurt":
                mc.thePlayer.sendQueue.addToSendQueue(new C02PacketUseEntity(mc.thePlayer, C02PacketUseEntity.Action.ATTACK));
                break;
            case "illegalchat":
                mc.thePlayer.sendChatMessage(rand.nextInt(100) + "§§§" + rand.nextInt(100));

        }
        this.setEnabled(false);

    }


}
